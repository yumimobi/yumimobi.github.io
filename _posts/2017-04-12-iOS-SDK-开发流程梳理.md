---
layout: post
title:  "iOS SDK å¼€å‘æµç¨‹æ¢³ç†"
date:   2017-04-14 12:08:08 +0800
categories: iOS
---

iOS SDK å¼€å‘æµç¨‹çš„æ¢³ç†è´¯ç©¿è¿‡å»ä¸‰ä¸ªæœˆ, ä»ä¸€æœˆä¸­åˆ°ä»Šå¤©, æ‰ç®—åˆæ­¥å®Œæˆ, å–å¾—äº†ä¸€äº›çªç ´, ä¹Ÿæœ‰ä¸€äº›äº‹æƒ…æ²¡åšå¥½, å¯ä»¥æ‰“ 80 åˆ†.



## æ¢³ç†ä¹‹å‰

ä¸€å¼€å§‹å°è¯•å¼€å‘ iOS SDK, å‘ç°æœ‰å‡ ä¸ªé—®é¢˜

* é¡¹ç›®ä»£ç ä¿å­˜åœ¨ SVN, åŒ…æ‹¬ä»£ç /ä¾èµ–çš„ç¬¬ä¸‰æ–¹ SDK/ç¼–è¯‘å¥½çš„åŒ…/æµ‹è¯• App/æ–‡æ¡£ç­‰, åŠ èµ·æ¥æœ‰ 80GB, å³ä½¿åœ¨å†…ç½‘, ä¹Ÿéœ€è¦ä¸‹è½½å¾ˆä¹…, å¯¹äºæ–°åŠ å…¥çš„åŒäº‹, å¾ˆéš¾å¿«é€Ÿä¸Šæ‰‹, å³ä½¿å¯¹äºè€å‘˜å·¥, ä¹Ÿå®¹æ˜“å‡ºé”™
* éœ€æ±‚å¼€å‘å®Œæˆä¹‹å, æ‰“åŒ…æµ‹è¯• App æäº¤ç»™æµ‹è¯•å›¢é˜Ÿ, æ˜¯æ‰‹åŠ¨çš„; å½“æµ‹è¯•å·¥ç¨‹å¸ˆå‘ç° bug, å¼€å‘å·¥ç¨‹å¸ˆä¿®å¤ä¹‹å, è¿˜å¾—æ‰‹åŠ¨æ‰“åŒ… App æäº¤
* SDK é€šè¿‡æµ‹è¯•ä¹‹å, å‘å¸ƒå‡ºå»ç»™å¼€å‘è€…ä½¿ç”¨, ä¹Ÿéœ€è¦æ‰‹åŠ¨æ‰“åŒ…, å¹¶ä¸”å¼€å‘è€…åªèƒ½æ‰‹åŠ¨ä¸‹è½½æˆ‘ä»¬çš„ SDK ä»¥åŠç¬¬ä¸‰æ–¹å¹¿å‘Šå¹³å°çš„ SDK å¹¶å¼•å…¥, æ·»åŠ ç›¸åº”çš„ frameworks, dynamic libraries, compile flags ç­‰, å®¹æ˜“å‡ºé”™


## ç›®æ ‡

æœ‰é—®é¢˜å°±è¦è§£å†³, æé«˜æ•´ä½“æ•ˆç‡, æ‰èƒ½è®©å›¢é˜Ÿè¶Šèµ°è¶Šå¿«, æˆ‘ä»¬çš„ç›®æ ‡æ˜¯

* å·¥ç¨‹å¸ˆä»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé‡Œé¢ä¸‹è½½ä»£ç , æ„å»ºé¡¹ç›®, å¹¶è¿è¡Œèµ·æ¥ä¸è¶…è¿‡åä¸ªå‘½ä»¤, ä¸è¶…è¿‡äº”åˆ†é’Ÿ
* å·¥ç¨‹å¸ˆåªéœ€è¦å…³å¿ƒæ€ä¹ˆå†™ä»£ç , ä¸éœ€è¦å…³å¿ƒæ€ä¹ˆæ‰“åŒ… App æäº¤ç»™æµ‹è¯•å›¢é˜Ÿ, ä¸éœ€è¦å…³å¿ƒæ€ä¹ˆæ‰“åŒ… SDK ç»™å¼€å‘è€…ä½¿ç”¨
* å¼€å‘è€…å¯ä»¥å¾ˆè½»æ¾å¼•å…¥/ç§»é™¤/æ›´æ–°æˆ‘ä»¬çš„ SDK, æ— é¡»é¢‘ç¹æ“ä½œå¤æ‚çš„ Xcode



## æ€ä¹ˆåš

å­¦ä¹ äº†è¿‘å‡ å¹´æµè¡Œèµ·æ¥çš„æŠ€æœ¯/å·¥å…·, è§‰å¾—å¯ä»¥ç”¨æ¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜

* ä½¿ç”¨ CocoaPods ä¾èµ–ç®¡ç†å·¥å…·, è´Ÿè´£ SDK å‘å¸ƒ
* ä½¿ç”¨ GitHub ä½œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ, bug tracker
* ä½¿ç”¨ HockeyApp ä½œæµ‹è¯• App ç®¡ç†ç³»ç»Ÿ, bug tracker
* ä½¿ç”¨ Travis-CI å®ç°æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²



##### CocoaPods

* CocoaPods æ˜¯ iOS & OS X å¼€å‘ä¸­æœ€å¸¸ç”¨çš„ä¾èµ–ç®¡ç†å·¥å…·, å¸®å¼€å‘è€…å¤„ç†å¥½äº†ä¾èµ–çš„ frameworks, dynamic libraries, compile flags, æˆ‘ä»¬æŠŠ SDK å‘å¸ƒåˆ° CocoaPods trunk, æ–¹ä¾¿å…¨çƒçš„å¼€å‘è€…æ¥å…¥æˆ‘ä»¬çš„ SDK
* ç®¡ç† SDK é¡¹ç›®çš„ä¾èµ–åº“, å‰Šå‡é¡¹ç›®ä½“ç§¯, ä¾èµ–åº“åªåœ¨å¼€å‘æ—¶å®‰è£…, é¡¹ç›®ä¸­åªä¿å­˜ä»£ç , å¦åˆ™é¡¹ç›®å¤ªå¤§, æ ¹æœ¬æ— æ³•æäº¤åˆ° GitHub



##### GitHub

GitHub æ˜¯ä¸ªä»£ç æ‰˜ç®¡å¹³å°, ä¾èµ–å®ƒè€Œå»ºçš„æœåŠ¡æ¯”è¾ƒä¸°å¯Œ, å¯ä»¥æé«˜æ•ˆç‡



##### HockeyApp

HockeyApp ç”¨æ¥ç®¡ç†æµ‹è¯• App, åŒ…æ‹¬å†å²ç‰ˆæœ¬, ä¾¿äºå…¬å¸æ‰€æœ‰äººä¸‹è½½, æµ‹è¯•, demo, è€Œä¸éœ€è¦å·¥ç¨‹å¸ˆç›´æ¥æŠŠ .ipa æ–‡ä»¶å‘ç»™æµ‹è¯•å›¢é˜Ÿ, ä»¥é‚®ä»¶çš„å½¢å¼, ä¹Ÿä¸éœ€è¦å°†æµ‹è¯• App ä¿å­˜åˆ° SVN ä¸­



##### Travis-CI

å½“å¼€å‘å·¥ç¨‹å¸ˆæäº¤ä»£ç åˆ° GitHub ä¹‹å, ä¾¿ä¼šè§¦å‘ Travis-CI è¿è¡Œæµ‹è¯•, ä»¥åŠè‡ªåŠ¨åŒ–æ‰“åŒ…æµ‹è¯• App æäº¤åˆ° HockeyApp ä¾›æµ‹è¯•å›¢é˜Ÿæµ‹è¯• æˆ–è€… è‡ªåŠ¨åŒ–æ‰“åŒ… SDK å‘å¸ƒåˆ° CocoaPods trunk ä¾›å…¨ä¸–ç•Œçš„å¼€å‘è€…æ¥å…¥



## é—®é¢˜

é‡åˆ°çš„é—®é¢˜å¤ªå¤š, ä¸»è¦æ˜¯å’Œ CocoaPods æ‰“åŒ…ç›¸å…³çš„, ä¸è¿‡éƒ½è§£å†³äº†, ä¸ä¸€ä¸€åˆ—ä¸¾.

* å¼€å‘è€…çš„ Podfile é‡Œé¢ä¸€èˆ¬éƒ½æœ‰ `use_frameworks!` è¿™è¡Œä»£ç , ä½†æ€ä¹ˆå°† SDK æ‰“åŒ…å‡º framework ? å¦‚æœä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜, ä¼šå½±å“å¤§éƒ¨åˆ†å¼€å‘è€…. åŸæœ¬å·²ç»æ”¾å¼ƒ, ç›´åˆ°å‘ç° `cocoapods-packager` å·¥å…·
* æ‰“å¥½çš„åŒ…æ”¾åœ¨é˜¿é‡Œäº‘ oss é‡Œé¢, è€Œ Travis-CI è®¿é—®é˜¿é‡Œäº‘ oss éå¸¸æ…¢, å¯¼è‡´æ‰“åŒ…å¤±è´¥ç‡å¤§å¤§æé«˜. åšäº†é˜¿é‡Œäº‘ oss cdn ä¹‹åè¿™ä¸ªé—®é¢˜å¾—ä»¥è§£å†³
* å‘å¸ƒ SDK åˆ° CocoaPods trunk ç»å¸¸å¤±è´¥, æ”¹ shell script æˆ python ruby å†™è„šæœ¬, å¢åŠ é‡è¯•æœºåˆ¶è§£å†³.



è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä¸å¾—ä¸æ

**åŸæœ¬åˆä½œæ–¹æ˜¯å†™æ­»çš„, æ‰“åŒ…æ—¶å†æ”¹, æå¤§å¢åŠ äº†æˆ‘ä»¬çš„å·¥ä½œé‡, è‡ªåŠ¨åŒ–æ‰“åŒ…å¤±è´¥ç‡ä¹Ÿå¤§å¤§æé«˜äº†, èŠ±äº†å¾ˆå¤šæ—¶é—´ä»æŠ€æœ¯è§’åº¦è§£å†³æ— æœ, åæ¥åœ¨å¤šæ–¹çš„åŠªåŠ›ä¹‹ä¸‹, ä»ä¸šåŠ¡è§’åº¦è§£å†³äº†, ä¹Ÿå°±æ˜¯ä»æœåŠ¡ç«¯ä¸‹å‘åˆä½œæ–¹.**

> æœ‰äº›æŠ€æœ¯ä¸Šçš„é—®é¢˜, å…¶å®ä»ä¸šåŠ¡ä¸Šå¾ˆå®¹æ˜“ç»•å¼€, è¦å°è¯•å¤šæ‰¾æ‰¾, ç¨‹åºå‘˜è¦å­¦ä¼šå·æ‡’. â€”â€” å´”è‹±æ°



## ç°åœ¨å¼€å‘è€…å¦‚ä½•æ¥å…¥æˆ‘ä»¬çš„ SDK

å¯¹äºä½¿ç”¨ CocoaPods çš„ iOS & OS X å¼€å‘è€…, æ¥å…¥æˆ‘ä»¬çš„èšåˆ SDK éå¸¸ç®€å•.



æ²¡æœ‰ç”¨è¿‡ CocoaPods çš„å¼€å‘è€…å…ˆåˆå§‹åŒ–

```sh
# å¦‚æœæ²¡æœ‰ ruby ç¯å¢ƒ, åˆ™éœ€è¦å®‰è£…, è¿™é‡Œæ˜¯é€šè¿‡ rbenv å®‰è£… ruby 2.2.1, ç”¨å…¶ä»–æ–¹æ³•ä¹Ÿå¯ä»¥
$ brew install rbenv ruby-build
$ rbenv init
$ rbenv install 2.2.1
$ rbenv global 2.2.1
$ rbenv rehash
$ gem update --system

# å®‰è£… CocoaPods
$ gem install cocoapods # å®‰è£… cocoapods
$ cd iOS-project-directory # åˆ‡æ¢åˆ° iOS é¡¹ç›®è·¯å¾„ä¸‹
$ pod init # åˆ›å»º Podfile
```



æ ¹æ®æ‰€éœ€èšåˆçš„å¹¿å‘Šå¹³å°, å°†ä¸‹é¢çš„å†…å®¹åŠ å…¥ Podfile

```ruby
  pod "YumiMediationAdMob"
  pod "YumiMediationAppLovin"
  pod "YumiMediationBaidu"
  pod "YumiMediationChartboost"
  pod "YumiMediationFacebook"
  pod "YumiMediationGDT"
  pod "YumiMediationInMobi"
  pod "YumiMediationMopub"
  pod "YumiMediationStartApp"
  pod "YumiMediationUnity"

  pod "YumiVideoAdsMediationAdColony"
  pod "YumiVideoAdsMediationAppLovin"
  pod "YumiVideoAdsMediationDomob"
  pod "YumiVideoAdsMediationInMobi"
  pod "YumiVideoAdsMediationIronsource"
  pod "YumiVideoAdsMediationLoopMe"
  pod "YumiVideoAdsMediationTapjoy"
  pod "YumiVideoAdsMediationUnity"
  pod "YumiVideoAdsMediationVungle"
```



æœ€åè¿è¡Œ

```sh
$ pod install --verbose # å®‰è£…æ‰€æœ‰ä¾èµ–
$ open $WORKSPACE.xcworkspace # æ‰“å¼€ workspace æ–‡ä»¶, è¿›è¡Œ App å¼€å‘
```



**æ¥å…¥å¤æ‚åº¦é™ä½äº†å¤šå°‘? ä¸çŸ¥é“æ€ä¹ˆè¡¡é‡, è‡³å°‘èƒ½è®©å¼€å‘è€…æ„Ÿåˆ°å¼€å¿ƒ ğŸ¤£**



## æ€»ç»“

è€—è´¹ä¸‰ä¸ªæœˆæ¢³ç† iOS SDK å¼€å‘æµç¨‹, è™½ç„¶ä¸€å®šç¨‹åº¦ä¸Šå½±å“äº†éœ€æ±‚å¼€å‘çš„è¿›åº¦, ä½†æé«˜å¼€å‘å·¥ç¨‹å¸ˆçš„æ•ˆç‡, æé«˜å†…éƒ¨æ²Ÿé€šæ•ˆç‡, é™ä½å¼€å‘è€…æ¥å…¥çš„å¤æ‚åº¦, é•¿è¿œæ¥çœ‹, ä¸ªäººè®¤ä¸ºæ˜¯å€¼å¾—çš„.
